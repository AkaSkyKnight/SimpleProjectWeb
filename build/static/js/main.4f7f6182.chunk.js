(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{54:function(e,t,n){e.exports=n(69)},63:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(18),s=n.n(o),i=n(24),l=(n(63),n(11)),c=n(12),u=n(15),d=n(13),m=n(16),p=n(17),E=n(48),f=n(22),h=n.n(f),v=(n(68),n(50)),O=function(){return Math.random().toString(16).slice(-8)},C={handler:null,allItems:[],activeItems:[],add:function(e){var t=e.message,n=e.timeout,r={_id:"".concat(O(),"-").concat(O()),timeout:n||5e3,message:t};return this.update([].concat(Object(v.a)(this.allItems),[r])),r},remove:function(e){this.update(this.allItems.filter(function(t){return t._id!==e}))},update:function(e){this.allItems=e,this.activeItems=e.slice(0,1),this.handler&&this.handler(this.activeItems)},subscribe:function(e){this.handler=e,this.handler(this.activeItems)}},b=n(71),P=n(35),S=n(70),j=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).close=function(){n.props.onClose(n.props.alert)},n.stopTimer=function(){n.closeTimer&&clearTimeout(n.closeTimer)},n.startTimer=function(){n.stopTimer();var e=n.props.alert.timeout;e&&(n.closeTimer=setTimeout(n.close,e))},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.startTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){var e=this.props,t=e.alert,n=Object(P.a)(e,["alert"]);return a.a.createElement(S.a,Object.assign({classNames:{enter:"transition-enter",enterActive:"transition-enter-active",exit:"transition-exit",exitActive:"transition-exit-active"},onMouseLeave:this.startTimer,onMouseEnter:this.stopTimer,timeout:{enter:300,exit:500}},n),a.a.createElement("div",{className:"alert alert-primary"},a.a.createElement("button",{className:"close","data-dismiss":"alert","aria-label":"Close",onClick:this.close},a.a.createElement("span",{"aria-hidden":"true"},"\xd7")),a.a.createElement("div",{className:"alert-message"},t.message)))}}]),t}(a.a.Component),g=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={items:[]},n.onAlertsChange=function(e){n.setState({items:e})},n.onItemClose=function(e){C.remove(e._id)},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){C.subscribe(this.onAlertsChange)}},{key:"render",value:function(){var e=this,t=this.state.items;return a.a.createElement(b.a,{className:"alerts-container"},t.map(function(t){return a.a.createElement(j,{key:t._id,alert:t,onClose:e.onItemClose})}))}}]),t}(r.Component),_=function(e,t){return C.add({timeout:t,message:e})},N=n(6),R=n(51),A=n(25),y=n(45),w=n(46),D=n(10),T=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=n);return t}({LOAD_PERSONS:null,LOAD_PERSONS_SUCCESS:null,LOAD_PERSONS_FAIL:null,CREATE_PERSON_SUCCESS:null,UPDATE_PERSON:null,UPDATE_PERSON_SUCCESS:null,UPDATE_PERSON_FAIL:null,REMOVE_PERSON_SUCCESS:null,ON_PERSON_CREATE:null,ON_PERSON_UPDATE:null,ON_PERSON_REMOVE:null});var I,U="_SUCCESS",k="_FAIL",L={loaded:!1,loading:!1,error:null,errorCode:null},F=function(e){return e};var M;function B(e,t){return e.list.find(function(e){return e.objectId===t.objectId})?e:Object(N.a)({},e,{list:e.list.concat(t)})}function x(e,t){return Object(N.a)({},e,{list:e.list.map(function(e){return e.objectId===t.objectId?t:e})})}function H(e,t){return Object(N.a)({},e,{list:e.list.filter(function(e){return e.objectId!==t})})}var V=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return n.reduce(function(e,t){return t(e,r)},t)}}({list:[]},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,n=e,r=e+U,a=e+k;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case n:return Object(N.a)({},e,{loading:!0,error:null,errorCode:null});case r:return t(Object(N.a)({},e,{loading:!1,loaded:!0}),o);case a:return Object(N.a)({},e,{loading:!1,error:o.error,errorCode:o.errorCode});default:return Object(N.a)({},L,e)}}}(T.LOAD_PERSONS,function(e,t){return Object(N.a)({},e,{list:t.result})}),(I={},Object(D.a)(I,T.CREATE_PERSON_SUCCESS,function(e,t){return B(e,t.result)}),Object(D.a)(I,T.UPDATE_PERSON,function(e,t){return x(e,t.person)}),Object(D.a)(I,T.UPDATE_PERSON_SUCCESS,function(e,t){return x(e,t.result)}),Object(D.a)(I,T.UPDATE_PERSON_FAIL,function(e,t){return x(e,t.prevPerson)}),Object(D.a)(I,T.REMOVE_PERSON_SUCCESS,function(e,t){return H(e,t.personId)}),Object(D.a)(I,T.ON_PERSON_CREATE,function(e,t){return B(e,t.person)}),Object(D.a)(I,T.ON_PERSON_UPDATE,function(e,t){return x(e,t.person)}),Object(D.a)(I,T.ON_PERSON_REMOVE,function(e,t){return H(e,t.person.objectId)}),M=I,function(e,t){var n=M[t.type];return n?n(e,t):e})),W=Object(A.c)({persons:V}),z=function(e){return e.persons};function J(e){var t=e.dispatch;return function(e){return function(n){if(!n.apiCall)return e(n);var r=n.apiCall,a=n.types,o=void 0===a?[]:a,s=Object(P.a)(n,["apiCall","types"]),i=Object(R.a)(o,3),l=i[0],c=i[1],u=i[2];return l&&t(Object(N.a)({type:l},s)),r().then(function(e){c&&t(Object(N.a)({type:c},s,{result:e}))}).catch(function(e){throw console.log("An error occurred.",e),u&&t(Object(N.a)({type:u},s,{error:e.message,errorCode:e.code})),e})}}}var q=n(9),Y=n(49),$=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).close=function(){n.setState({person:{},saving:!1,serverError:null}),n.props.onHide()},n.save=function(){var e=n.preparePerson();(n.props.person?n.props.updatePerson:n.props.createPerson)(e).then(function(){return n.close()}).catch(function(e){return n.setState({serverError:e.message})})},n.onNameChange=function(e){return n.setState({person:Object(N.a)({},n.state.person,{name:e.target.value})})},n.onAddressChange=function(e){return n.setState({person:Object(N.a)({},n.state.person,{address:e.target.value})})},n.state={person:e.person||{},saving:!1,serverError:null},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.person||{},n=e.person||{};t.objectId!==n.objectId&&this.setState({person:n})}},{key:"preparePerson",value:function(){var e=this.state.person;return Object(N.a)({},e,{name:(e.name||"").trim()||null,address:(e.address||"").trim()||null})}},{key:"render",value:function(){var e=this.props.show,t=this.state,n=t.person,r=t.serverError,o=t.saving,s=!this.props.person;return a.a.createElement(q.a,{show:e,onHide:this.close},a.a.createElement(q.a.Header,{closeButton:!0},a.a.createElement(q.a.Title,null,s?"Add":"Edit"," Person")),a.a.createElement(q.a.Body,null,a.a.createElement("form",null,a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Name:"),a.a.createElement("input",{className:"form-control",placeholder:"Input name",value:n.name||"",onChange:this.onNameChange})),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Address:"),a.a.createElement("input",{className:"form-control",placeholder:"Input address",value:n.address||"",onChange:this.onAddressChange})),r&&a.a.createElement(Y.a,{variant:"danger"},r))),a.a.createElement(q.a.Footer,null,a.a.createElement(p.a,{variant:"secondary",onClick:this.close},"Close"),a.a.createElement(p.a,{variant:"primary",onClick:this.save,disabled:o},o?"Saving...":"Save")))}}]),t}(r.Component),G=Object(i.b)(null,{createPerson:function(e){return{types:[null,T.CREATE_PERSON_SUCCESS,null],apiCall:function(){return h.a.Data.of("Person").save(e)}}},updatePerson:function(e){return function(t,n){var r=z(n()).list.find(function(t){return t.objectId===e.objectId});return t({person:e,prevPerson:r,types:[T.UPDATE_PERSON,T.UPDATE_PERSON_SUCCESS,T.UPDATE_PERSON_FAIL],apiCall:function(){return h.a.Data.of("Person").save(e)}})}}})($),K=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={removing:!1},n.close=function(){n.setState({removing:!1}),n.props.onHide()},n.confirm=function(){var e=n.props.person;n.setState({removing:!0}),n.props.removePerson(e.objectId).then(function(){return n.close()})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.person,n=e.show,r=this.state.removing;return a.a.createElement(q.a,{show:n,onHide:this.close},a.a.createElement(q.a.Header,{className:"bg-danger text-white",closeButton:!0},a.a.createElement(q.a.Title,null,"Confirma\xe7\xe3o para Excluir Pessoa.")),a.a.createElement(q.a.Body,null,a.a.createElement("p",null,'Voce realmente quer deletar esta pessoa? "',a.a.createElement("b",null,t&&t.name),'"')),a.a.createElement(q.a.Footer,null,a.a.createElement(p.a,{variant:"secondary",onClick:this.close,disabled:r},"No"),a.a.createElement(p.a,{variant:"danger",onClick:this.confirm,disabled:r},"Yes")))}}]),t}(r.Component),Q=Object(i.b)(null,{removePerson:function(e){return{personId:e,types:[null,T.REMOVE_PERSON_SUCCESS,null],apiCall:function(){return h.a.Data.of("Person").remove(e)}}}})(K),X=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={showEditor:!1,editorProps:null,showDeleteConfirmation:!1,deleteConfirmationProps:null},n.showEditor=function(e){return n.setState({showEditor:!0,editorProps:{person:e}})},n.hideEditor=function(){return n.setState({showEditor:!1,editorProps:null})},n.showDeleteConfirmation=function(e){return n.setState({showDeleteConfirmation:!0,deleteConfirmationProps:{person:e}})},n.hideDeleteConfirmation=function(){return n.setState({showDeleteConfirmation:!1,deleteConfirmationProps:null})},n.onPersonCreate=function(e){return n.props.onPersonCreate(e)},n.onPersonRemove=function(e){return n.props.onPersonRemove(e)},n.onPersonUpdate=function(e){var t=n.props.persons.find(function(t){return t.objectId===e.objectId});t&&e.name!==t.name&&_('Person with name "'.concat(t.name,'" has changed his name to "').concat(e.name,'"!')),n.props.onPersonUpdate(e)},n.onAddClick=function(){return n.showEditor(null)},n.onEditClick=function(e){return n.showEditor(e)},n.onDeleteClick=function(e){return n.showDeleteConfirmation(e)},n.renderPerson=function(e){return a.a.createElement("li",{key:e.objectId,className:"list-group-item d-flex justify-content-between align-items-center"},a.a.createElement("div",null,a.a.createElement("div",null,e.name),a.a.createElement("div",{className:"text-muted small"},e.address)),a.a.createElement(E.a,null,a.a.createElement(p.a,{size:"sm",variant:"outline-primary",onClick:function(){return n.onEditClick(e)}},"Editar"),a.a.createElement(p.a,{size:"sm",variant:"outline-danger",onClick:function(){return n.onDeleteClick(e)}},"Deletar")))},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.props.loadPersons(),this.personRT=h.a.Data.of("Person").rt(),this.personRT.addCreateListener(this.onPersonCreate),this.personRT.addUpdateListener(this.onPersonUpdate),this.personRT.addDeleteListener(this.onPersonRemove)}},{key:"componentWillUnmount",value:function(){this.personRT.removeCreateListener(this.onPersonCreate),this.personRT.removeUpdateListener(this.onPersonUpdate),this.personRT.removeDeleteListener(this.onPersonRemove)}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.error,r=e.persons,o=this.state,s=o.showEditor,i=o.editorProps,l=o.showDeleteConfirmation,c=o.deleteConfirmationProps;return t?a.a.createElement("div",null,"Carregando..."):n?a.a.createElement("div",{className:"alert alert-danger"},"Error: ",n):a.a.createElement("div",null,a.a.createElement("div",{className:"mb-2"},a.a.createElement(p.a,{onClick:this.onAddClick},"Adicionar Pessoa"),a.a.createElement(G,Object.assign({},i,{show:s,onHide:this.hideEditor}))),a.a.createElement("ul",{className:"list-group"},r.map(this.renderPerson)),a.a.createElement(Q,Object.assign({},c,{show:l,onHide:this.hideDeleteConfirmation})))}}]),t}(r.Component),Z=Object(i.b)(function(e){var t=z(e);return{loading:t.loading,loaded:t.loaded,error:t.error,persons:t.list}},{loadPersons:function(){return{types:[T.LOAD_PERSONS,T.LOAD_PERSONS_SUCCESS,T.LOAD_PERSONS_FAIL],apiCall:function(){return h.a.Data.of("Person").find()}}},onPersonCreate:function(e){return{person:e,type:T.ON_PERSON_CREATE}},onPersonUpdate:function(e){return{person:e,type:T.ON_PERSON_UPDATE}},onPersonRemove:function(e){return{person:e,type:T.ON_PERSON_REMOVE}}})(X);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));h.a.initApp("057B4BBA-41FE-52E2-FF04-2ACE042DC700","D008C0D7-9985-BB61-FFEA-E48502047900");var ee=document.getElementById("root");s.a.render(a.a.createElement(i.a,{store:Object(A.d)(W,Object(A.a)(y.a,J,Object(w.createLogger)({collapsed:!0})))},a.a.createElement(function(){return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"header"},a.a.createElement("h3",null,"Agenda de Contatos")),a.a.createElement(Z,null),a.a.createElement(g,null))},null)),ee),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[54,1,2]]]);
//# sourceMappingURL=main.4f7f6182.chunk.js.map